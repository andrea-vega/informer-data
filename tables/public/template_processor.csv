tenant,id,type,name,templateId,datasetId,queryId,datasourceId,index,phase,data,createdAt,updatedAt
manager,3e9cdadd-2f9e-4453-ae73-ddbfbfc9cf52,sql-query,Batches,a308ef9f-7d13-4ca2-b32d-e1b8f8a27a6a,,,61afd6d4-dbd6-404e-91d5-515fef4682f6,0,,"{""query"": ""select t0_0.\""ach_limiter\"", t0_0.\""dflt_hrs_special\"" , t0_0.\""over_bene_date\"", t0_0.\""check_print_time\"" , t0_0.\""client_id\"" , t0_0.\""deliver_date\"", t0_0.\""delivery_method\"" , \nt0_0.\""force_benupd\"", t0_0.\""fourk_force_zero\"", t0_0.\""fsa_calc_date\"", t0_0.\""fsa_reim_batch\"", t0_0.\""garn_count\"", t0_0.\""gl_date\"", t0_0.\""gl_period\"", t0_0.\""pay_date\"", t0_0.\""batch_desc\"", t0_0.\""batch_status\"",\nt0_0.\""batch_no\"", t0_0.\""batch_status_numeric\"" , t0_0.\""w_batch_type\"", t0_0.\""processor\"", t0_0.\""qtr_end_date\"" , t0_0.\""remote_tse_cutoff_date\"", t0_0.\""remote_tse_cutoff_time\"", \nt0_0.\""repl_sch_bch\"", t0_0.\""ship_date\"", t0_0.\""act_ship_date\"", t0_0.\""act_ship_doc_id\"" , t0_0.\""ship_doc_desc\"", t0_0.\""act_ship_meth\"" , t0_0.\""show_future_checks\"", t0_0.\""sup_fed_rate\"",\nt0_0.\""sup_state_rate\"" , t0_0.\""suppress_ach\"", t0_0.\""suppress_benadj\"", t0_0.\""suppress_approval\"", t0_0.\""suppress_cbp\"", t0_0.\""suppress_dedn_flag\"", t0_0.\""suppress_earn_flag\"", t0_0.\""suppress_garn_flag\"",\nt0_0.\""suppress_manual_checks\"", t0_0.\""team\"", t0_0.\""suppress_arr\"", t0_0.\""suppr_benupd\"", t0_0.\""suppress_benefits\"", t0_0.\""total_ach_vouchers\"" , t0_0.\""total_chk_amount\"", t0_0.\""check_count\"", \nt0_0.\""total_deposit_amt\"", t0_0.\""total_form_count\"", t0_0.\""total_vouchers\"", t0_0.\""year_end_date\"", t0_0.\""hdr_pay_code1\"", t0_0.\""hdr_pay_code2\"", t0_0.\""hdr_pay_code3\"", t0_0.\""hdr_pay_code4\"", \nt0_0.\""hdr_pay_code5\"", t0_0.\""hdr_pay_code6\"", t0_0.\""hdr_pay_code7\"" , t0_0.\""hdr_pay_code8\"", t0_0.\""hdr_pay_code9\"",\narray(select jsonb_extract_path(jsonb_array_elements(t0_0.record->'eebatch'),'employeeId')) as \""employeeId\"", \narray( select epay.pay_group from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""pay_group\"", \n    array( select epay.pay_method from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""pay_method\"", \n    array( select epay.pay_period from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""pay_period\"", \n    array( select eper.bh_candidate_id from employee_per eper, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where eper.employee_id = mv.\""employeeId\"" and eper.peo_id = t0_0.peo_id ) as \""bh_candidate_id\"", \n    array( select eper.first_name from employee_per eper, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where eper.employee_id = mv.\""employeeId\"" and eper.peo_id = t0_0.peo_id  ) as \""first_name\"", \n    array( select eper.gender from employee_per eper, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where eper.employee_id = mv.\""employeeId\"" and eper.peo_id = t0_0.peo_id ) as \""gender\"", \n    array( select eper.last_name from employee_per eper, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where eper.employee_id = mv.\""employeeId\"" and eper.peo_id = t0_0.peo_id ) as \""last_name\"", \n    array( select eper.middle_init from employee_per eper, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where eper.employee_id = mv.\""employeeId\"" and eper.peo_id = t0_0.peo_id ) as \""middle_init\"", \n    array( select eper.sort_name from employee_per eper, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where eper.employee_id = mv.\""employeeId\"" and eper.peo_id = t0_0.peo_id ) as \""sort_name\"", \n    array( select eper.telephone from employee_per eper, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where eper.employee_id = mv.\""employeeId\"" and eper.peo_id = t0_0.peo_id ) as \""telephone\"", \n    array( select ecom.clock_no from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""clock_no\"", \n    array( select ecom.dept_code from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""dept_code\"", \n    array( select ecom.division_code from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""division_code\"", \n    array( select ecom.employee_no from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""employee_no\"", \n    array( select ecom.job_code from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""job_code\"", \n    array( select ecom.location_code from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""location_code\"", \n    array( select ecom.reports_to from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""reports_to\"", \n    array( select ecom.status_code from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""status_code\"", \n    array( select ecom.type_code from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""type_code\"", \n    array( select ecom.union_code from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""union_code\"", \n    array( select ecom.last_hire::date from employee_com ecom, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where ecom.employee_id = mv.\""employeeId\"" and ecom.peo_id = t0_0.peo_id and ecom.client_id = t0_0.client_id) as \""last_hire\"", \n    array( select epay.annual_pay from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id)  as \""annual_pay\"", \n    array( select epay.auto_hours from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""auto_hours\"", \n    array( select epay.biweekly_pay from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""biweekly_pay\"", \n    array( select epay.dflt_hours from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""dflt_hours\"", \n    array( select epay.hourly_rate from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""hourly_rate\"", \n    array( select epay.monthly_pay from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""monthly_pay\"", \n    array( select epay.period_rate from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""period_rate\"", \n    array( select epay.weekly_pay from employee_pay epay, jsonb_to_recordset(t0_0.record->'eebatch') as mv(\""employeeId\"" text) where epay.employee_id = mv.\""employeeId\"" and epay.peo_id = t0_0.peo_id and epay.client_id = t0_0.client_id ) as \""weekly_pay\""\n    from \""public\"".\""batch_control\""  as t0_0  where client_id = '{{ $inputs.clientId }}' and batch_no = '20168' \n    "", ""variable"": ""batches""}",2019-12-12 16:16:09.857+00,2020-01-20 19:13:53.573+00
manager,85f68b8a-f5a8-4d4e-a536-a74d2456860d,power-script,Power Script,a308ef9f-7d13-4ca2-b32d-e1b8f8a27a6a,,,,1,,"{""script"": ""for (let i = 0; i < $ctx.batches.length; i++) {\n    const batch = $ctx.batches[i];\n\n    // header info\n    batch.company_name = 'Hi Arrow Technologies, Inc.';\n    batch.logo = 'https://www.prismhr.com/wp-content/themes/prismhr/blocks/sitefooter/logo-prismhr.svg';\n    batch.phone = '954-467-2083';\n    batch.fax = '555-555-5351';\n\n    // report parameters\n    batch.pay_period_start = '2016-05-01T04:00:00.000Z';\n    batch.pay_period_end = '2016-05-15T04:00:00.000Z';\n\n    // employee rows, sample 2 records\n    batch.tax_status = ['S-0', 'S-1'];\n    batch.pay_group = ['WEEKLYNEW', 'WEEKLYNEW'];\n    batch.pay_amount = [2038.46, 1750];\n    batch.pay_method = ['Salary', 'Salary'];\n    batch.employee_status = ['Active FT', 'Active FT'];\n\n    const pay_codes = [\n        batch.hdr_pay_code1,\n        batch.hdr_pay_code2,\n        batch.hdr_pay_code3,\n        batch.hdr_pay_code4,\n        batch.hdr_pay_code5,\n        batch.hdr_pay_code6,\n        batch.hdr_pay_code7,\n        batch.hdr_pay_code8,\n        batch.hdr_pay_code9\n    ];\n\n    batch.pay_code1 = [40, 40];\n    batch.pay_code2 = [2, 0];\n    batch.pay_code3 = [0, 0];\n    batch.pay_code4 = [2, 0];\n    batch.pay_code5 = [0, 0];\n    batch.pay_code6 = [10, 15];\n    batch.pay_code7 = [0, 0];\n    batch.pay_code8 = [0, 2];\n    batch.pay_code9 = [0, 0];\n    batch.pay_code10 = [1, 2];\n\n    batch.pay_codes = _.reduce(pay_codes, function (acc, code, i) {\n        return code ? acc.concat({\n            header: code,\n            values: batch['pay_code' + (i + 1)]\n        }) : acc;\n    }, []);\n\n\n}"", ""timeout"": 30000}",2019-12-12 16:16:25.589+00,2020-01-23 20:40:53.931+00
